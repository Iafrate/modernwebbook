<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Validity State - Chapter 08</title>
  <link rel="stylesheet" href="../bootstrap/css/bootstrap.css">
  <link rel="stylesheet" href="../assets/style.css">
</head>
<body>
<form class="chapter-08">
	<fieldset>
		<legend>Validity State</legend>
		<label for="email">Email</label>
		<input type="email" id="email" placeholder="Email" autofocus required><p></p>
		<label for="tel">Telephone</label>
		<input type="tel" id="tel" placeholder="Numbers only" pattern="\d*" required><p></p>
	</fieldset>
	<button type="submit">Submit</button>
</form>
<script>
document.addEventListener('DOMContentLoaded', function () {
	'use strict';
	var inputField = document.querySelectorAll('input'),
			iLen = inputField.length,
			i;
	function statusMsg(e) {
			var valid = e.currentTarget.checkValidity(),
					validStatus = e.currentTarget.validity,
					validMsg = e.currentTarget.nextSibling,
					status;
			console.log(validStatus);
			if (valid) {
				status = 'âœ“';
			} else {
				if (validStatus.patternMismatch) {
					status = 'Pattern mismatch';
				} else if (validStatus.typeMismatch) {
					status = 'Type mismatch';
				} else if (validStatus.valueMissing) {
					status = 'Value missing';
				} else {
					status = 'Unknown error';
				}
			}
			validMsg.textContent = status;
	}
	for (i = 0; i < iLen; i++) {
		inputField[i].addEventListener('input', statusMsg, false);
	}
}, false);
</script>
</body>
</html>